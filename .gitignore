ì»´íŒŒì¼ëœ ì‹¤í–‰ íŒŒì¼ ë¬´ì‹œ

sysclean

ì˜¤ë¸Œì íŠ¸ íŒŒì¼ ë¬´ì‹œ

*.o

í…ŒìŠ¤íŠ¸ìš© í´ë” ë¬´ì‹œ

test_dir/

ë§¥(Mac)ì´ë‚˜ ìœˆë„ìš°ì—ì„œ ìƒê¸°ëŠ” ì‹œìŠ¤í…œ íŒŒì¼ ë¬´ì‹œ

.DS_Store
Thumbs.db

ì—ë””í„° ì„¤ì • íŒŒì¼ ë¬´ì‹œ (VSCode ë“±)

.vscode/

* **ì´ê²Œ ì™œ AíŒŒíŠ¸ ì—­í• ì¸ê°€ìš”?** AíŒŒíŠ¸ê°€ 'ì•„í‚¤í…íŠ¸'ë¡œì„œ í”„ë¡œì íŠ¸ í™˜ê²½ì„ ì„¸íŒ…í•˜ëŠ” ì—­í• ì´ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. ì´ê±¸ ì˜¬ë ¤ì£¼ë©´ íŒ€ì›ë“¤ì´ "ì˜¤, ì„¼ìŠ¤ ìžˆëŠ”ë°?" í•  ê²ë‹ˆë‹¤.

---

### 2. ðŸ§  ì¶”ê°€í•´ì•¼ í•  ë¡œì§: ìž¬ê·€ íƒìƒ‰ (Recursive Scan)

í˜„ìž¬ ìž‘ì„±í•´ì£¼ì‹  `scanner.c` ì½”ë“œëŠ” ì§€ì •ëœ í´ë” **'í•œ ê²¹'**ë§Œ ìŠ¤ìº”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì§„ì§œ 'ì²­ì†Œ ì—ì´ì „íŠ¸'ë¼ë©´ í´ë” ì•ˆì— ìžˆëŠ” ë˜ ë‹¤ë¥¸ í´ë”(Sub-directory)ê¹Œì§€ ì‹¹ ë’¤ì ¸ì•¼ê² ì£ ?

ì´ê±´ ìƒˆë¡œìš´ íŒŒì¼ì„ ë§Œë“œëŠ” ê²Œ ì•„ë‹ˆë¼, **`scanner.c`ë¥¼ ì—…ê·¸ë ˆì´ë“œ**í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤.

**[ì—…ê·¸ë ˆì´ë“œ ê°€ì´ë“œ]**
í˜„ìž¬ `readdir` ë£¨í”„ ì•ˆì—ì„œ íŒŒì¼ì¸ì§€ í™•ì¸í•˜ëŠ” ë¶€ë¶„ì— ì•„ëž˜ ë¡œì§ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

1.  ì§€ê¸ˆ ì½ì€ ê²Œ í´ë”(`DT_DIR`)ì¸ì§€ í™•ì¸í•œë‹¤.
2.  í´ë”ë¼ë©´? ê·¸ ê²½ë¡œë¡œ ë‹¤ì‹œ `scan_directory()`ë¥¼ í˜¸ì¶œí•œë‹¤ (**ìž¬ê·€ í˜¸ì¶œ**).
3.  ë°›ì•„ì˜¨ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‚´ ë¦¬ìŠ¤íŠ¸ ê¼¬ë¦¬ì— ê°–ë‹¤ ë¶™ì¸ë‹¤.

**ìˆ˜ì •ëœ `scanner.c`ì˜ ë£¨í”„ ì˜ˆì‹œ:**

```c
// scanner.c ë‚´ë¶€ì˜ while ë£¨í”„ ìˆ˜ì • ì œì•ˆ

while ((dir = readdir(d)) != NULL) {
    if (dir->d_name[0] == '.') continue; // ìˆ¨ê¹€ íŒŒì¼ ê±´ë„ˆë›°ê¸°

    char full_path[1024];
    snprintf(full_path, sizeof(full_path), "%s/%s", dir_path, dir->d_name);

    // [ì¤‘ìš”] í´ë”ì¸ì§€ í™•ì¸
    if (dir->d_type == DT_DIR) {
        // ìž¬ê·€ í˜¸ì¶œ: í´ë” ì•ˆì˜ íŒŒì¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì˜´
        FileInfo *sub_list = scan_directory(full_path);
        
        // ë°›ì•„ì˜¨ ë¦¬ìŠ¤íŠ¸ë¥¼ í˜„ìž¬ ë¦¬ìŠ¤íŠ¸ì— ì—°ê²°
        if (sub_list != NULL) {
            if (head == NULL) {
                head = sub_list;
                // sub_listì˜ ëì„ ì°¾ì•„ current ê°±ì‹ 
                current = sub_list;
                while (current->next != NULL) current = current->next;
            } else {
                current->next = sub_list;
                // ëìœ¼ë¡œ í¬ì¸í„° ì´ë™
                while (current->next != NULL) current = current->next;
            }
        }
    } 
    // [ê¸°ì¡´ ë¡œì§] ì¼ë°˜ íŒŒì¼ì¸ ê²½ìš°
    else {
        FileInfo *new_node = create_node(dir_path, dir->d_name);
        if (head == NULL) {
            head = new_node;
            current = new_node;
        } else {
            current->next = new_node;
            current = new_node;
        }
    }
}
